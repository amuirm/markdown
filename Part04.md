# Part 4

## NIC
---
  - "Network Interface Card"
  - 보통 랜카드라 불림
  - P&P
    - Plug and Play
    - PC가 랜카드를 알아서 인지하여 필요 프로그램을 설치하고 네트워크에 연결해주는 기능
    - 데스크톱용 랜카드, 버스 방식
      - 버스처럼 데이터가 정류장에 들리듯 돌아다니는 방식
      - 가장 많이 쓰이는 방식 PCI방식
<!-- 91p.g. -->

## 허브
---
  - PC끼리 연결하여 통신을 가능하게 해준다.
  - 구멍 한 개에 PC 한 개를 연결 할 수 있다.
1. 리피터
   - 들어온 데이터를 그대로 전송한다.
   - 한 포트로 들어온 데이터를 나머지 모든 포트로 뿌려준다.
   - 보통 UTP 케이블 전송 거리가 100m 이지만 그 이상인 거리를 통신하게 하기 위해서 필요한 장치
2. 멀티포트
   - 포트가 많이 있는 허브

- 허브에서의 통신
   1. 5개의 포트가 있는 허브가 있다
   2. 1번 포트로 PC가 보낸 데이터를 허브를 통해 전달한다
   3. 받은 데이터를 1번 포트를 제외한 모든 포트에게 데이터를 전송한다
   4. 랜카드가 자신에게 온 데이터인지 확인 후 필요 자기에게 맞지 않은 데이터는 버린다
    ---
        랜카드는 들어온 프레임에 목적지 맥 어드레스를 보고 자신의 맥 어드레스와 비교한 후 자기 것이 아니면 버린다
   5. 자기에게 필요한 데이터를 받았으면 랜카드가 CPU에 인터럽트를 걸어 데이터를 처리해 줄 것을 요청한다

<!-- 96p.g. -->

### 인텔리전트 허브
---
    NMS에서 모든 데이터를 분석할 수 있을 뿐 아니라 제어도 가능
    NMS - "Network Management System" 
    대형 네트워크에서 사용
    값이 비쌈 
    PC에 문제가 생기면 잘못된 PC 포트를 찾아 자동으로 네트워크에서 분리시켜 따로 고립시켜버림 - Auto Partition

### 더미 허브
---
    요즘 더미 허브에 Auto Partition 기능이 추가 됨

### 세미 인텔리전트 허브
---
    홀로 있으면 더미 허브 인텔리전트 허브와 연결되어있으면 인텔리전트 허브가 되는 허브

### 스태커블 허브
---
    스택이 가능한 허브, 쌓을 수 있는 허브
    허브의 상태를 웹 브라우저를 통해서 확인 가능, 포트의 상태나 데이터의 양 감시 가능

<!-- 99p.g. -->

## Bridge
    PC 와 PC가 통신을 할떄 다른 PC와는 통신을 못하는 허브와는 달리 콜리전 도메인을 나누어 통신이 가능하게 함
    네트워크 규모를 북단 남단으로 나누고 그 사이를 브리지로 잇는 다고 할때 북단끼리, 남단끼리 통신을 하는 도중에 북단과 남단과의 통신을 할 수 있음
    스위치와 같은 역할을 함

## Switch
    1. Learning, 배운다
    2. Flooding, 모르면 들어온 포트를 제외한 다른 모든 포트로 뿌린다
    3. Forwarding, 해당 포트로 건네준다
    4. Filtering, 다른 포트로는 못 건너가게 막는다
    5. Aging, 나이를 먹는다
    
    1. 출발의 MAC주소를 기억하고 자신의 MAC 주소 테이블에 저장을 시켜놓는다
    2. 들어온 프레임이 찾아가는 주소를 봤을때 주소테이블에 없는 주소일때 들어온 포트 제외 모든 포트로 플러딩한다
    3. 목적지를 아는 상황, 주소테이블에 있고 목적지가 추발지의 MAC주소와 다른 세그먼트에 존재하는 경우 해당 포트로만 프레임을 뿌림
    4. 브리지를 못 넘어가게 막는 것, 브리지가 목적지의 MAC 주소를 알고 있고 출발지와 목적지가 같은 세그먼트에 있는 경우 사용
    5. 배우는 것을 계속 저장하면 금방 한계가 나타나, 디폴트로는 5분 정도 저장시켜놓고 그 이후로 프레임이 들어오지 않을때 삭제시킨다

## Looping(뻉뻉이)
    발생 이유
    스위치는 데이터가 들어온 포트를 제외하고 브로드캐스트로 모든 포트에 패킷을 보내는 flooding이 일어난다 그런데 스위치끼리 포트가 2개씩 연결이 되어있으면 서로 브로드캐스트로 패킷을 보내게 되어 루프현상이 발생한다

    굳이 포트를 2개씩 연결하는 이유
    하나의 경로가 끊어져도 다른 경로를 쓰기 위해서

    CSMA/CD의 특성, 한 세그먼트 안에서 어느 한 순간에는 오직 한 녀석만이 통신을 할 수 있다는 규칙 때문에 네트워크가 무용지물 상태로 빠지게 됨

    스패닝 트리 알고리즘
    Spanning Tree Algorithm
    자동으로 루핑을 막아주는 알고리즘

## 폴트 톨러런트(Fault Tolerant)
    장애 대비책
    네트워크상에 어떤 문제가 발생할 때를 대비해서 미리 장애 대비를 해놓는 것을 말함
    한 개의 라우터가 죽었을 때를 대비하여 다른 한 대를 가지고 있다 라는 예시

## 로드 밸런싱(Load Balancing)
    로드를 분산
    하나의 인터넷 회선을 이용한 인터넷 접속 대신 두 개의 인터넷 회선을 사용하는 예시
    이렇게 되면 데이터가 두 라인 중 하나를 선택해서 이용하기 때문에 로드가 분산되는 효과, 즉 속도가 두 배가 되는 것이다
    만약 회선 하나가 끊어지면 다른 회선으로 이전할 수 있는데, 이럴 경우 로드 밸런싱과 폴트 톨러런트를 겸하게 된다

## 스패닝 트리 알고리즘 (Spanning Tree Algorithm)
    2개의 스위치간에 연결을 할때 연결이 하나밖에 없으면 속도가 느리고 연결이 끊길때 폴트 톨러런트가 일어날 수 없는 등 다양한 단점을 위해서 연결을 두 개로 만든다

    하지만 링크를 두 개로 하면 flooding이 일어나는데 이를 대비하기 위해서 스패닝 트리 알고리즘을 사용한다.

    자동으로 루핑을 검색해서 이런 루핑이 발생할 수 있는 상황을 미리 막아주는 역할

    루핑을 미리 막기위해 두 개 이상의 경로가 발생하면 하나를 제외하고 나머지 경로를 자동으로 막아두었다가 기존 경로에 문제가 생기면 막아놓은 경로를 풀어서 데이터를 전송하는 알고리즘

    알고리즘에 의해서 링크가 끊어졌을 때 대기하고 있던 다른 링크가 다시 살아나서 연결을 해주는데 1분 이상이 소요된다, 즉 1분동안 네트워크가 끊어진 상태로 기다려야 한다 ( 요즘은 기가 비트 이더넷같은 연결된 포트를 묶는 기술로 2~3 초안에 연결 시켜, 단점을 해결해 나가고 있다)

## 라우터 vs 스위치
    라우터와 스위치 차이
    가격 : 라우터가 스위치보다 비싸다 (비슷한 스팩을 가지고 비교하였을때)
    속도 : 스위치가 우새하다 (라우터는 내부에서 처리하는 일이 많아 처리속도가 느리다)
    구성의 편리함 : 스위치가 훨씬 구성이 쉽다 (스위치는 전원만 공급해주면 사용이 가능하지만, 라우터는 라우팅 프로토콜 지정, 네트워크도 설정해야 하기 떄문)

    위와 같이 가장효율적인건 스위치이지만 왜 라우터를 써야 할까?
    그건 바로 브로드캐스트 때문이다
    만약 스위치로만 대규모 네트워크가 구성되었다고 했을때 먼 나라에서 PC를 끄면 브로드캐스트가 모든나라에 있는 PC까지 전달이 된다. 또 통신을 할 떄 상대편의 맥 주소를 찾기 위해 ARP를 사용하는데, 이게 바로 브로드 캐스트이다

    따라서 브로드캐스트 영역을 나누는 것은 정말 중요하다. 이 영역을 나누기 위해선 라우터가 꼭 필요하다.

    브로드캐스트 영역을 나눌 때는 사용하는 프로토콜이나 애플리케이션 프로그램에 따라서 약간의 차이가 있다, 보통 권고사항은
    IP일 때 약 500 노드, IPX일 때 약 300 노드, AppleTalk일 때 약 200 노드

    라우터가 제공하는 기능은 바로 로드 분배, 즉 여러 개의 경로를 가지고 있기 때문에 데이터가 여러 경로를 타고 날아갈 수 있다. 따라서 한쪽 경로에 문제가 생겨도 바로 다른 경로를 타고 날아갈 수 있다. 스위치도 가능하지만 굉장히 제한적이다.
    그 외에도 프로토콜이나 데이터의 크기, 중요도 등 여러 상황에 따라 트래픽의 전송 순서를 조정해주는 QoS(Quality of Service) 기능도 제공한다